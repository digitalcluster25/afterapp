# Документация проекта ":after" - Система управления здоровьем и активностью

## 1. ВВЕДЕНИЕ

### 1.1 Цель документа
Данный документ содержит полное описание системы ":after" - веб-приложения для управления здоровьем и активностью, включая отслеживание параметров, постановку целей и ведение блога о здоровье.

### 1.2 Область применения
Документ предназначен для разработчиков, дизайнеров, тестировщиков и заинтересованных сторон, участвующих в создании, поддержке и развитии системы.

### 1.3 Определения и сокращения
- **BRD** - Business Requirements Document
- **UI** - User Interface (Пользовательский интерфейс)
- **UX** - User Experience (Пользовательский опыт)
- **API** - Application Programming Interface
- **localStorage** - Локальное хранилище браузера
- **shadcn/ui** - Библиотека компонентов пользовательского интерфейса

## 2. ОБЩИЕ ТРЕБОВАНИЯ

### 2.1 Назначение продукта
Система ":after" предназначена для:
- Отслеживания параметров здоровья и самочувствия
- Постановки и мониторинга целей
- Ведения блога с научными статьями о здоровье
- Анализа прогресса через дашборд

### 2.2 Целевая аудитория
- Спортсмены и любители фитнеса
- Люди, ведущие здоровый образ жизни
- Пользователи, интересующиеся научными методами оценки здоровья

### 2.3 Бизнес-цели
- Создание удобного инструмента для самоконтроля здоровья
- Предоставление научно обоснованных методов оценки состояния
- Формирование привычки регулярного отслеживания показателей
- Образование пользователей через качественный контент

## 3. ФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ

### 3.1 Пользовательские истории

#### US-001: Отслеживание параметров
**Как** пользователь, **я хочу** добавлять и отслеживать параметры здоровья, **чтобы** контролировать свое состояние.

**Критерии приемки:**
- Пользователь может создать новый параметр с названием и единицей измерения
- Пользователь может добавлять значения параметра с датой и временем
- Пользователь может просматривать историю значений по периодам (неделя/месяц/сезон/год)
- Пользователь может редактировать и удалять параметры
- Пользователь может связать статью из блога с параметром

#### US-002: Постановка целей
**Как** пользователь, **я хочу** ставить цели и оценивать прогресс, **чтобы** мотивировать себя к достижению результатов.

**Критерии приемки:**
- Пользователь может создать цель с названием и статусом
- Пользователь может оценивать цель по шкале 1-7 баллов
- Пользователь может привязать параметры к цели
- Пользователь может изменить статус цели (активная/завершена/приостановлена)
- Пользователь может связать статью из блога с целью

#### US-003: Просмотр дашборда
**Как** пользователь, **я хочу** видеть общую картину своего состояния, **чтобы** быстро оценить прогресс.

**Критерии приемки:**
- Дашборд отображает виджеты параметров с трендами
- Дашборд показывает статус целей с прогрессом
- Данные обновляются в реальном времени
- Интерфейс адаптивен для разных устройств

#### US-004: Чтение блога
**Как** пользователь, **я хочу** читать научные статьи о здоровье, **чтобы** получать знания и мотивацию.

**Критерии приемки:**
- Пользователь может просматривать список статей
- Пользователь может читать полный текст статьи
- Пользователь может навигировать по заголовкам статьи
- Пользователь может фильтровать статьи по категориям

### 3.2 Пользовательские сценарии

#### Сценарий 1: Ежедневное отслеживание
1. Пользователь открывает приложение
2. Переходит в раздел "Трекер"
3. Выбирает параметр для добавления значения
4. Вводит значение и сохраняет
5. Просматривает историю параметра

#### Сценарий 2: Оценка цели
1. Пользователь переходит в раздел "Цели"
2. Выбирает активную цель
3. Оценивает прогресс по шкале 1-7
4. Просматривает обновленный статус на дашборде

#### Сценарий 3: Чтение статьи
1. Пользователь переходит в раздел "Блог"
2. Выбирает интересующую статью
3. Читает содержание с навигацией по заголовкам
4. При необходимости переходит к связанным статьям

## 4. АРХИТЕКТУРА СИСТЕМЫ

### 4.1 Технологический стек
- **Frontend:** Next.js 15, React 18, TypeScript
- **UI Library:** shadcn/ui, Tailwind CSS
- **State Management:** React Hooks, localStorage
- **Icons:** Lucide React
- **Markdown:** react-markdown, remark-gfm

### 4.2 Структура проекта
```
src/
├── app/                    # Next.js App Router
│   ├── page.tsx           # Главная страница (дашборд)
│   ├── layout.tsx         # Основной layout
│   ├── globals.css        # Глобальные стили
│   ├── articles/          # Страницы блога
│   ├── goals/             # Страницы целей
│   └── wellness-tracker/  # Страницы трекера
├── components/            # React компоненты
│   ├── ui/               # shadcn/ui компоненты
│   ├── Navigation.tsx    # Навигация
│   ├── Footer.tsx        # Футер
│   └── ...               # Другие компоненты
├── lib/                  # Утилиты и конфигурация
├── types/                # TypeScript типы
└── hooks/                # Пользовательские хуки
```

## 5. ДЕТАЛЬНОЕ ОПИСАНИЕ КОМПОНЕНТОВ

### 5.1 Навигация (Navigation.tsx)
**Назначение:** Основная навигация приложения
**Функциональность:**
- Отображение логотипа и названия
- Навигационное меню с активным состоянием
- Адаптивный дизайн

**Пропсы:** Нет
**Состояние:** pathname (из usePathname)

### 5.2 Дашборд (WellnessDashboard.tsx)
**Назначение:** Главная страница с обзором параметров
**Функциональность:**
- Заголовок секции
- Отображение виджетов параметров
- Загрузка данных из localStorage

**Пропсы:** Нет
**Состояние:** Нет (использует ParameterWidgets)

### 5.3 Виджеты параметров (ParameterWidgets.tsx)
**Назначение:** Отображение карточек параметров с аналитикой
**Функциональность:**
- Загрузка параметров из localStorage
- Расчет средних значений за неделю
- Вычисление трендов (рост/снижение/стабильно)
- Отображение прогресс-баров

**Пропсы:** Нет
**Состояние:**
- parameters: ParameterWithValues[]
- loading: boolean

**Ключевые функции:**
- `getWeekData()` - получение данных за неделю
- `calculateWeekAverage()` - расчет среднего значения
- `calculateTrend()` - вычисление тренда

### 5.4 Трекер параметров (WellnessTracker.tsx)
**Назначение:** Управление параметрами и их значениями
**Функциональность:**
- Список отслеживаемых параметров
- Форма добавления нового параметра
- Форма добавления значений
- Удаление параметров и значений

**Пропсы:** Нет
**Состояние:**
- parameters: TrackedParameter[]
- newParameter: { name: string, unit: string }
- showAddForm: boolean

### 5.5 Детали параметра (ParameterDetail.tsx)
**Назначение:** Детальная страница параметра
**Функциональность:**
- Отображение информации о параметре
- Форма добавления значений
- Табы с историей (неделя/месяц/сезон/год)
- Селектор статей из блога
- Удаление значений

**Пропсы:** goalId: number
**Состояние:**
- parameter: TrackedParameter | null
- values: ParameterValue[]
- showAddForm: boolean
- selectedArticle: Article | null

### 5.6 Управление целями (GoalsModule.tsx)
**Назначение:** Список целей пользователя
**Функциональность:**
- Отображение списка целей
- Создание новой цели
- Переход к детальной странице цели

**Пропсы:** Нет
**Состояние:**
- goals: Goal[]
- newGoal: { title: string }

### 5.7 Детали цели (GoalDetail.tsx)
**Назначение:** Детальная страница цели
**Функциональность:**
- Редактирование названия цели
- Изменение статуса цели
- Оценка цели по шкале 1-7
- Привязка параметров к цели
- Селектор статей из блога
- Удаление цели

**Пропсы:** goalId: number
**Состояние:**
- goal: Goal | null
- selectedMetrics: TrackedParameter[]
- goalValue: number | null
- selectedArticle: Article | null

### 5.8 Карточка цели (GoalCard.tsx)
**Назначение:** Отдельная карточка цели для дашборда
**Функциональность:**
- Отображение названия и статуса цели
- Прогресс-бар с оценкой
- Цветовая индикация прогресса
- Ссылка на детальную страницу

**Пропсы:** goal: Goal & { todayValue?: number | null }

### 5.9 Статус целей (GoalsStatusWidget.tsx)
**Назначение:** Виджет статуса целей на дашборде
**Функциональность:**
- Загрузка целей с оценками
- Отображение карточек целей в сетке
- Ссылка на управление целями

**Пропсы:** Нет
**Состояние:**
- goals: GoalWithValue[]
- loading: boolean

### 5.10 Блог (ArticlesModule.tsx)
**Назначение:** Список статей блога
**Функциональность:**
- Отображение списка статей
- Карточки статей с превью
- Фильтрация по категориям
- Переход к чтению статьи

**Пропсы:** articles: Article[]
**Состояние:** Нет

### 5.11 Страница статьи (ArticlePage)
**Назначение:** Детальная страница статьи
**Функциональность:**
- Отображение полного текста статьи
- Навигация по заголовкам
- Плавная прокрутка к разделам
- Кнопка "Назад к статьям"

**Пропсы:** Нет
**Состояние:**
- article: Article | null
- headings: Heading[]
- activeHeading: string | null

### 5.12 Навигация по статье (ArticleNavigation.tsx)
**Назначение:** Боковая навигация по заголовкам статьи
**Функциональность:**
- Извлечение заголовков из контента
- Отслеживание активного заголовка
- Плавная прокрутка к разделам

**Пропсы:** content: string
**Состояние:**
- headings: Heading[]
- activeHeading: string | null

### 5.13 Селектор статей (ArticleSelector.tsx)
**Назначение:** Выбор статьи для привязки к параметру
**Функциональность:**
- Фильтрация статей по категории
- Выбор статьи из списка
- Отображение превью статьи
- Гармошка с полным текстом

**Пропсы:**
- onArticleSelect: (article: Article) => void
- selectedArticleId?: number

### 5.14 Селектор статей для целей (GoalArticleSelector.tsx)
**Назначение:** Выбор статьи для привязки к цели
**Функциональность:** Аналогично ArticleSelector, но для категории "Научные методы"

## 6. МОДЕЛЬ ДАННЫХ

### 6.1 Типы данных (types/index.ts)

```typescript
interface TrackedParameter {
  id: number
  name: string
  unit: string
  createdAt: number
}

interface ParameterValue {
  id: number
  value: string
  date: string
  time: string
  notes?: string
}

interface Goal {
  id: number
  title: string
  status: 'active' | 'completed' | 'paused'
  createdAt: number
}

interface Article {
  id: number
  title: string
  summary?: string
  content?: string
  category?: string
  publishedAt?: string
  author?: string
  description?: string
}
```

### 6.2 Хранение данных
- **localStorage** для всех пользовательских данных
- **Ключи хранения:**
  - `tracked_parameters` - список параметров
  - `parameter_values_${id}` - значения параметра
  - `goals` - список целей
  - `goal_metrics_${id}` - параметры цели
  - `goal_value_${id}` - оценка цели
  - `goal_article_${id}` - статья цели
  - `parameter_article_${id}` - статья параметра

## 7. ПРАВИЛА ПРОЕКТА

### 7.1 Дизайн-система
- **Библиотека:** Только shadcn/ui компоненты
- **Цветовая схема:** Grayscale (оттенки серого, черный, белый)
- **Иконки:** Lucide React, только grayscale
- **Шрифты:** Sans-serif (Helvetica Pro)
- **Анимации:** Плавные, без теней

### 7.2 Принципы разработки
- **Минимализм:** Простые решения
- **Качество:** Чистый, читаемый код
- **Следование инструкциям:** Строгое выполнение требований
- **Полнота:** Выполнение всех частей задачи

### 7.3 Критические правила
- **НЕ изменять** существующий контент без разрешения
- **НЕ ломать** существующую функциональность
- **ВСЕГДА спрашивать** перед крупными изменениями
- **СОХРАНЯТЬ** целостность данных

## 8. ИНСТРУКЦИИ ПО ВОССОЗДАНИЮ

### 8.1 Установка зависимостей
```bash
npm install next@15 react@18 react-dom@18
npm install @radix-ui/react-progress
npm install lucide-react
npm install react-markdown remark-gfm
npm install tailwindcss postcss autoprefixer
```

### 8.2 Настройка shadcn/ui
```bash
npx shadcn@latest init
npx shadcn@latest add card button input badge select tabs dialog alert-dialog navigation-menu separator popover drawer command textarea label
```

### 8.3 Структура файлов
Создать структуру папок согласно разделу 4.2

### 8.4 Настройка TypeScript
Создать `tsconfig.json` с настройками для Next.js 15

### 8.5 Настройка Tailwind CSS
Создать `tailwind.config.ts` с конфигурацией для shadcn/ui

## 9. ТЕСТИРОВАНИЕ

### 9.1 Функциональное тестирование
- Создание и удаление параметров
- Добавление значений параметров
- Создание и управление целями
- Оценка целей по шкале 1-7
- Навигация по статьям блога
- Связывание статей с параметрами/целями

### 9.2 Тестирование интерфейса
- Адаптивность на разных устройствах
- Корректность отображения shadcn/ui компонентов
- Работа hover эффектов и анимаций
- Цветовая схема grayscale

### 9.3 Тестирование данных
- Сохранение в localStorage
- Восстановление данных при перезагрузке
- Синхронизация между компонентами

## 10. РАЗВЕРТЫВАНИЕ

### 10.1 Сборка проекта
```bash
npm run build
```

### 10.2 Запуск в продакшене
```bash
npm start
```

### 10.3 Переменные окружения
- `NEXT_PUBLIC_APP_URL` - URL приложения
- `DIRECTUS_URL` - URL API (опционально)

## 11. ЗАКЛЮЧЕНИЕ

Данная документация содержит полное описание системы ":after" и позволяет воссоздать проект с нуля. Все компоненты, функции и правила детально описаны для обеспечения качественной разработки и поддержки системы.

---

**Версия документа:** 1.0  
**Дата создания:** 2024  
**Автор:** AI Assistant  
**Статус:** Актуальная
